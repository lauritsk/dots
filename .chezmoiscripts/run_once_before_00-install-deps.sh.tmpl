#!/usr/bin/env bash
set -euo pipefail

{{ if eq .chezmoi.os "darwin" }}
    echo "ğŸ macOS detected."
    echo "   No dependencies required."

{{ else if eq .chezmoi.os "linux" }}
    echo "ğŸ§ Linux detected."

    {{ if eq .chezmoi.osRelease.id "fedora" }}
        echo "ğŸ“¦ Installing Fedora dependencies..."
        sudo dnf update -y && sudo dnf install -y curl git @development-tools

    {{ else if eq .chezmoi.osRelease.idLike "debian" }}
        echo "ğŸ“¦ Installing Debian/Ubuntu dependencies..."
        sudo apt update -y && sudo apt install -y curl git build-essential

    {{ else if eq .chezmoi.osRelease.idLike "arch" }}
        echo "ğŸ“¦ Installing Arch dependencies..."
        sudo pacman -Syu --noconfirm --needed curl git base-devel

    {{ else }}
        echo "âš ï¸ Warning: Unknown Linux distribution. Skipping system deps."
    {{ end }}

{{ end }}

echo "âœ… Successfully installed system dependencies!"
