#!/usr/bin/env bash
set -euo pipefail

source "{{ .chezmoi.homeDir }}/.bashrc"

FISH_PATH="$(command -v fish)"

if ! grep -q "$FISH_PATH" /etc/shells; then
    echo "Adding to /etc/shells..."
    echo "$FISH_PATH" | sudo tee -a /etc/shells >/dev/null
fi

if [[ "$SHELL" != "$FISH_PATH" ]]; then
    echo "Changing default shell to Fish..."
    sudo chsh -s "$FISH_PATH" "$USER"
else
    echo "Fish is already the default shell."
fi

echo "âœ… Successfully configured fish as default shell!"
